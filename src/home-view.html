
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-ajax/iron-request.html">
<link rel="import" href="../bower_components/iron-iconset-svg/iron-iconset-svg.html">
<link rel="import" href="../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../bower_components/paper-spinner/paper-spinner-behavior.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/polymerfire/polymerfire.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="custom-icons.html">

<dom-module id="home-view">
  <template>
    <style include="shared-styles iron-flex iron-positioning iron-flex-alignment">
      :host {
        display: block;
        padding: 0px;
      }

      .business-description {
        margin: 0%;
        
      }

      .business-image {
        width: 75px;
        height: 75px;
        border-radius: 50%;
      }

      h2 {
        color: #70C187;
      }

      .item {
        transition-timing-function: ease-out;
        transition-duration: .75s;
        background: #eee;
        width: 100%;
      }

      .item:hover {
        opacity: .75;
      }

      .main-container {
        display: flex;
        align-items: center;
        width: 100%;
        @apply --layout-wrap;
        @apply --layout-center;
        @apply --layout-around-justified;
      }

      paper-fab {
        --paper-fab-background: var(--app-secondary-color);
        bottom: 2.5%;
        right: 2.5%;
        position: fixed;
      }

      .profile-pic {
        
        border-radius: 5%;
        display: flex;
        @apply --layout-vertical;
      }

      .stick-btn-container {
        justify-content: center;
        right:0;
        left:0;
      }

      #submit-request-container {
        @apply --layout-horizontal;
        @apply --layout-center;
        @apply --layout-around-justified;
        color: white;
        background: #70C187;
        border-radius: 5px;
        max-width: 400px;
        margin: auto;
        position: sticky;
        position: -webkit-sticky;
        bottom: 0px;
      }

    </style>

    <firebase-auth 
      id="auth"
      app-name="polyn-app"
      user="{{user}}">
    </firebase-auth>

    <firebase-document
      app-name="polyn-app"
      id="usersinfo"
      data="{{usersInfo}}">
    </firebase-document>

    <paper-spinner id="spinner" active="[[loading]]" active></paper-spinner>

    <div class="flex layout horizontal center-justified">
     <div class="card"  on-tap="_onTapBusiness">
      <div class="layout horizontal">
       <iron-image style="background-color: lightgray;" sizing="cover" class="business-image" preload fade src="images/RecordStoreDayLogo.jpg" on-tap="_onTapBusiness" ></iron-image>
       
        <!-- Middle Flex Box Vertical -->
        <div class="flex layout vertical ">
         <h1>Goods Records</h1>
          <p class="description">This is a short description of the record store.</p>
            <div class="layout horizontal">
              <p><paper-icon-button icon="custom-icons:near-me"></paper-icon-button>1.2 miles away</p> 
              <p><paper-icon-button icon="custom-icons:phonelink-ring"></paper-icon-button></p>
              <p><paper-icon-button icon="custom-icons:web"></paper-icon-button></p>
            </div>
          </div>

        </div>
        <!--<div id="submit-request-container">
          <paper-button class="sticky-btn" on-tap="_onTapCreateMessage" icon="custom-icons:message" >Submit Your Request</paper-button>
        </div>-->
      </div>
    </div>



     <div class="flex layout horizontal center-justified">
     <div class="card"  on-tap="_onTapBusiness">
      <div class="layout horizontal">
       <iron-image style="background-color: lightgray;" sizing="cover" class="business-image" preload fade src="images/RecordStoreDayLogo.jpg" on-tap="_onTapBusiness" ></iron-image>
       
        <!-- Middle Flex Box Vertical -->
        <div class="flex layout vertical">
         <h1>Spinster Records</h1>
          <p class="description">This is a short description of the record store.</p>
            <div class="layout horizontal">
              <p><paper-icon-button icon="custom-icons:near-me"></paper-icon-button>1.2 miles away</p> 
              <p><paper-icon-button icon="custom-icons:phonelink-ring"></paper-icon-button></p>
              <p><paper-icon-button icon="custom-icons:web"></paper-icon-button></p>
            </div>
          </div>

        </div>
        <!--<div id="submit-request-container">
          <paper-button class="sticky-btn" on-tap="_onTapCreateMessage" icon="custom-icons:message" >Submit Your Request</paper-button>
        </div>-->
      </div>
    </div>

  <div id="submit-request-container">
    <paper-button class="sticky-btn" on-tap="_onTapCreateRequest" icon="custom-icons:message" >Create a Request</paper-button>
  </div>

  </template>

  <script>
    class HomeView extends Polymer.GestureEventListeners(Polymer.Element) {
      static get is() { return 'home-view'; }

      static get properties() {
        return {
          loading: {
            type: Boolean,
            notify: true,
            value: false
          },
          user: {
            type: Object,
            observer: '_userChanged'
          },
          usersInfo: {
            type: Object
          }
        };
      }

      _userChanged(user) {
        console.log("HomeView._userChanged");

        // As soon as we get the user - get the users info so we can 
        // learn more about them!
        if(user && user.uid) {
          this.$.usersinfo.path = "/users/" + user.uid + "/info";
        }
      }

      _onTapBusiness() {
        console.log("HomeView._onTapBusiness");
        var polynApp = document.getElementById("polynApp");
        var businessView = polynApp.pushPageOnCurrentTab("business-view");
// TODO: Pass a real sellerId!
        businessView.sellerId = 1;
      }
      
      _onTapCreateRequest() {
        console.log("HomeView._onTapCreateRequest");
        var polynApp = document.getElementById("polynApp");
        var requestView = polynApp.pushPageOnCurrentTab("request-view");
      }
    }

    window.customElements.define(HomeView.is, HomeView);
  </script>
</dom-module>
